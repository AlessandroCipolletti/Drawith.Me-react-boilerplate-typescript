import { put, takeEvery } from 'redux-saga/effects' // call
// import request from 'utils/request'
import db from 'utils/db'
import { downloadImage } from 'common/utils/images'

// import { setErrorAction } from 'containers/PageContainer/actions'
import {
  REQUEST_LOCAL_DRAWINGS,
  DELETE_SELETED_DRAWINGS,
  DOWNLOAD_SELETED_DRAWINGS,
} from './constants'

import { receiveLocalDrawingsAction } from './actions'

export function* requestLocalDrawingsSaga() {
  try {
    // yield db.drawings.add({
    //   drawingId: 1,
    //   userId: 1,
    //   folderId: 1,
    //   title: 'Image',
    //   description: '',
    //   state: 2,
    //   createTime: new Date().getTime(),
    //   updateTime: new Date().getTime(),
    //   previewPath: 'data:image/png;base64,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',
    //   imagePath: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAABXFBMVEVHcEwSQ4YNRKVVWFZ3eXc9QT9sbm2MjYyOkI9/gYCbJhDTJAapIQkpLSt+IhBKTUtjZmRJTEpfYV89QT8LQrs4PDs3Ozi5IQaQIg42OjcGQtYB0CpCRUNucG9TVlUpLSoIQ8QtMS5HSkkqLywyNjNMT01ZXFrkJQQ+Qj81OTaAgoEOSqGJJxQ5PTpXWlg+QT8oLSpDRkQ0ODVOUU9iZWMoLCotMS5pa2oHj2jKzMqytLN0d3UHfYmZmprGx8bR0tEoLSoA+QD/JgAEM/8pLisoKyv+JgArMC0pLSUmKygiLSsjKCUqJCwvMzAcKiwpLB8iJR40ODUbJTz5JQAkNlgkJCgYKE5FKB8STGAA5RYaPm/dJANVJRoErUg0JR8pLzhmIhQnMEYUKGEKglsDvTs6LCbqJALzJQEGk1FyJhY8QD4FOuzIJAcKaF4ZPkUFoUwUXHUTLIIfPCYQdmYr6I25AAAAQHRSTlMA+vZqPNVOAxIj6/7xz/t6Y66Bsewn7vX3Xv7+xHSf9frwOePR15f+iNll3udGz+uZmsn9/cG1te9C7fzVfmeA8bEueQAAFpBJREFUeNrtXQlXE03WDpikE9lBAZFFBAF9Fdz1XaeSVFK9ZmFfwqqARMTt/5/zVfVa3UlIb1jxS98zr3NmnFGep+5et27HYpFEEkkkkUQSSSSRRBJJJJFEEkkkkUQSSSSRRBLJbyWphw/vdjL8pb6Zmbm39zoUPnf3DUQQAACfcx1JQPylhh/LUifiT08CqOOHfakONIAhhBDQCZh92Hn4pyCABn4w86zzHMCKYBEA5zouFqaGELTww7cdpwDDCqQIEDotE+CSszb8I52WB6TnzQyAhMLZeGc7AGGg0xzAQAV1tAEkR039JwYwn+48B0AbgJLsuBTYLAFUA1joNAcwKEGKAPS44wzgsQWfKMBgpynAtEAbAOi8CFCx4U90XgQQqBQQjnZaBEiN2AwADXeaA1iS6BQADXWcA5ih8KNOdADAJABXg7Md5gA4bgjaUsCOa4UPV6gmAICTndYJj6/QNXAHNkFGFNoBgI5rgiwh6x4AQaHjDCA5Y4sAo51mAHHSBIFmCgw6LQXkRmxNoI7rAnLDtgwA9XVaCpgctSnAzC9PAVP3nuO/ml0KnKAyIASVXx4B785qfz1DB4AsB4hGfnkEvGfMIbAhYFCwGcCvj4DcLGBJQKrPfg1w69f/CIApAbck+h6ISQ3ElABuElAOAAQ1AOzP3z73Nk3AsSUgWaG7oErAFPDZW2JOM57mCtkSwL1TaAV4FMwAnvXp7mTptyHgv9c0AbUnwfTfMCfBy1whUwL+/Ou1cRVKUoDXwRRg2LxV8TJWx5CA9P/++rtGdYFq7wJmlEZPCaJ77U4Al45Pvfv779c1RIXAyr+B/syBip5RQNS+BGDgyVsDSyPzswqWioIATUAgF5B+bCkAaEcT4NLJ4aHEaKWCdLwQQttVOFSmgvz5S4pOAHYmc+l2IyCVXJgcrQgC+emIEOyojoB3wRTAImCkvcIgF59OIEnA0DXQsO74dQpGA3RChhE044ky2E4EpAYnFcE8ctBU8O8JvhNBLmWFAJhPpNqHgPRAomKeO7gGv9oMTPhOBKaMrjL+1VtFeaMExF/MaWZ/PfbgxXAqQXWVvdF4gwTEh9RuP0KwNXq9GPA7FDalGF0l/Pd566ndGAGpgTnN7pvCVX/LEQgWfCqAMVqD/8K5dFsQEH8LQSOnpwMXaaGTIV8t4akasEqqkVgbEMANj4JGgQ5CFXGRSLlYLpfKZalYFK3fRytpPwqgWCWV19naGyEgPaQ0gE9+EUVB4A9Ot7aq1aOjo4v+/oujo+opxRB65J0B8sDKJGCSY04Ad3eyYZ6Dj17gCfaj/tu9Y5c9e3t7i/ifnrGLA1oHPLcFU48o/JXBGHMCHr6sU38VPRAOtjB2Av3sfK2QNeR8rCpR6RDvdTrsiRpn9TjiOZUIn4CHffXHT84eg396e2xvjWAuFArqL6pkz3q3BDof8pYQcssC1VTxnEmETsDD+bqsRxSlg+rF+NjeecE694Ip2exe/4FgXY56vB2Mm30AX7lk2AQ87HNqPxB5DL8Xq33BgdxkYO3y6MB4KEkYeOyhO85NUwogNFcArplQBDT/3/jHD0ThoNrf23PuPPispQvZ7NrYkakDAFv0vHsG0qNWGQge+ykmwtSAevzY8x31qoZfyDqA2xjorfKiOSODYJ/b59LcsJUEX5cFg6DiEj9yqr+01T+2pp98tomobmB8S7DSOZzQuuxqpczLdTJb1CSH4J4D8CsYiL+0p/5QLJLjP9cgXieEgacHRfqWcGbAjeVxUxVruEoYurHzd8VAetKu/7BY3Bq/PFtT8WVbMtDTf1AE9D3ZkIucMPVIscrApoUE+BUEcNyII/4JUvX23tp1um+zgkJP/wH9Zh6iROtwOFWhssCmMfCXEBAbEIBNAQh+fPyu8GsMXF5YoUBNJmeHW5hBalmxCJAWYiwJiM/Y8YtStXexkHUHXw8FmAHaDyBYaWEGUzWzFQxgLX6jBPS1OIsRYBt2E/mj3rNCwTV+VQfWiB+AttbBtWaQegSpLHCZi90gA/B5CwNANvxFfP7nnvCbfsBsD2jVTWWhuRI8qQAzf4TSEzfprl959ub6NR7xUVtzi+i/i+jXUAe2eHsLBSWmmjg3btLqhAJhOXVdwh80E+RaRQBbBoD9X++ZZ/yaDuyNVx2uECqJQa7hhUvFKgNAq5vFQLVAy5RkULGlANLW+J4P/Nr/ZbGXqgsMCoYaObhpKgQofqdLwqgGqXsZLf89uOhZ84Nf04FzJwMIIWG2zhVw6VHkXgFuthweqCBq2E2UjsZ84td04BzXhhKgsiqS7guPna5gQbHqQP+XSmEQoN7MUvi3cADM+sOvM4BdoSTawgrGqDwapFE+eaWY1RPyP2AZBgFLtmtPETsAjwGwjoHCHjED0XmdAFcW4joHqf9eV6z5KuR/viwEAuKzdAQslo4u1wLg1xuGZ2MXNgb0kQqEEu/+/fPPP//76+8KdR3o/145DAKGKAPABGyNnwWBb7hCkhEIDW6VkFKp1F69ekW/MkMBJguCExCfoY21WFYVIBuYgezaIlECe4Gh2gEkNq/YfOR0jCEB0wL95FFTgKAEaGaw2Lsl2aKBdpcKtV/oG8U4QwLSK5CyALHUf7mWDUG0wuBUkiRBAMAxTWS7eMJWscwxJGAY2kJgdews+Pmr1fFaz/gpEASNgvprVqrxGGi+LigBqQRAdAu4f89/CuDA//SUtMg0CvL5RletgWNgCAQMViAKXwGwC9jD+EXN1jEBP35gDpoMWlQCzRcGI4DjJhXKA+Ii4GwtBAKwEi3e3hJFvdcho6svX65ETEEeNiAg2JB9QA2IU/4YikK1dy2MEJAtnN3eAjp+IB93TeRyuQddmxsbTjXAfzkajDHUgAWJWv5aPOhfDMEDGOev/skwL6/fyWnyuXsbW4INP3bAAXetBCOAroOhWNy6nQ0F/56p/yCfN/ET6b5yZAXSy4APbYMRkKQf/WELGAtOAJkXUM8fOM5fZ+AHoHQACXNB3xkGI2BaoHKg4sH4WRj4zzF+w7Cc+HO5b0CGZiRErwI/NA5EADWgqVpAb2AFIM2A21XjJ8rX489187LZBqq9/jfGlIAkVQYAkT+6DEiAWgff1tvC2P03wJ+buDIJgK/+SrEl4IW1+wyI4lbvYjZQDFSbwrdPjS5AHq4/yNXLtk4Agsrr/8WYEkAsgLoKOyKd0ID6v3gb57/61DvanWiAP9cl542X9q//DGOqxz8BSYWqyUScBASyAF3/tYshrP+HXZ9zLQhYTrHVgGnaAgTtLiig/mP8evw/7s7lriMAmwB6F4YCcM/8EmDNaKsWQO4CsoWA+IHuAOTjO03w53ZNAmA4K2fv+SUgWbPacqJ4MH4epAzA9e+env/gPzN/2Oz8CQGGEwxp3xTH+bSABasvC/QssBDM/xv2n0ddudYEICGkbQuqG+B8xACqEi6WLvb8E1DQ8l/jYhz7/89uCJDYfncgSSkALgTHzwMpwDlV/8iN45/TCbImYAFZrQByHeb/NkjLf6Go5bct8LcNATgLApC+Dsr6JECL/1Vez++bxv96AsAtthZAtQKwBez5jIFG/NPz/+bxvy4MIsSUgBdUb1oskiyoECD/NfP/5vG/3gky1YDUPNULId1gf3WAnv+KRv3XGn9uPfQw6NMCaALKRz0F3yMxhv8n9t/dEn/uyiKApRO05nO0ILhX8InfzH9d4v981RYmQPeCgFCsjvnJAsg80OXTU2DmPy7wWw0RhCBDAuKIupwCZVwI+cCP05/L/lMr/+tygT/34EdbELCg0L0QXxZg4tfzP7j72Q0BdywC8uwI4B5RBIhitdfzTID2VorCL69PuMGf+8MkALIjgEsrtjvxi7HzbNMXQdfNA1rxX27Y/2tEgCQba1g8rcoIVwYB3Q8vj+8ZLsAlCVr4q5qflGzU/25OAGROADdNDcZBoXw0PtazqD6GLTR4FtdkKvrpqflw3nH/1f4EpGgXgAkonW5d9PYsLp6dU29is9e8Eius7Y2b7h96wZ/7Q2gDApI1aixIkMpSUeS3qtWLcfN9pMlC4/GnQs/FqTUEKHvATxMQbPVUEFlSaALKZUmNBeh06+ji6VPtmaRW5jjtQf8PZ9j9WVmEJ/y5Ln1EwPe6iVDSQHo4XCqX9Wgokgm+0yp5JH656Dx2i4jC5bjW/dDnPzzhz+1aBNRYraCmP4dECJDMoogIhKfYJYyPXV72LJ6fr61RzhH/+9pZT++F5f4gyHvD//kqb10NslrC/4JOA4kLsI0ukg0hIiSbIggLPT17i4QFIoW180UMfwsUKfzHnvDjTNgkACwzWsJuXwWMLaDE8/rgmqUKhAVsDtWji4vxXnVdBtmW0dt/tAWLRWvCIe+mAGx0O07m56dZWYBtF7RUPDxEPBFgrbPCzoAcsrotRjytXvQ/JTJ+UUXFIj0CLue7vOHPdQl5fWtikBHxgK0AelKXL558/75+jDkoEQ6sIVZtaQw0dgVpXGDw9KO4vOyuAKIvx/MmARKjNICjvokJ+NLq94l//nn/c1slQdcDx1wvwa/+SxTtw56uCwDaB+aN+TCB0Yc40vQXwfjySff7nUwmc3//w7ddQgIEvGOY1Zpvto85QtmrA1B9YN74M2fZREHOtg6eL3//mtFl5+NXTRGMpTYt3qLmZa8OQB0SM0ek5hkFgSFIF0KrXzK07Hz89HP9WOFLJR5cuz9RrQAnvBPAWyOCQ4wsYJTCxUubXzNOuf8JG4NSKmkkINgMP/RsACQI+F03FJpMCcgs40FpY3snUy87qkM4hCoJsKEmkAjgHX9uXbBmRNlUAtbeJjUJWP2QaSyGQ4BqYGgw5S4jHwowcWW6QDDDxgfGa5QHANLmfqa5YEUgHKhhwRkB8vKVdw+AXYBFABsfyE1XKKPmiw0twMbBT2wLfL1LlOVtHxawK1hLo9j4wDQ9Ho6zoA+ZloJ9IokLvE0JoOwjBuYmVi0fyOhSYKpCJwHXW4BdDRBve+kkK3/4iAFS3tqywyQP5CbpRQmtLcCUjz93D3m6hvJDwOfNvJVavmThArg4NRUB3FmAIV93j+lPyskV7wR0l6mnYi/Y3IhBZL0Rc2sBhhJsH6JgBOxuWASw6QemEvSFSJMs6DoG+CAmMHElWy4wwaQdZpuM82YBqhWsQz4AAd0blguEbCxgWqEVQDrZ90ZA5sMxb+z9kdEf3i3AysAAEwtIr1AKgEqSNwtQjQDyxmMg2SsBDw5lK4jMs7AAanefqgFeLQDLz0NdBXwkQl2ChV9h0g+1dvcRJeS9W0Ams7/OayrgvRicOBas/eEKCwvgntB1ECwVPVsAzgm3UUnfKi+ve+uHdpnvBSECfSwsILVMXwnD0uanjHf5cFwyvOChp4boxCZgnQVN1ajxeJ7f2L3vgwBiAzoBeU/9gK6NkFZmhOIB1ELwpw/8mZ1vqKTdIXnzghOr1oNZKEyyqAOmKvSuDH7DhwukUwGPXnBXppfGsKiEUwmF7gTwqz5coGkD5Bo978ULdssytUaGSRo8ZduYWZJ8uUAtDuipgIxce8HP61QOBCU2CmBrZ+AYeN8fASQX0lIBWe52nwNRjQBGCiDR/X2+5FcBMplP67CkJ4NunUD3jzylAICRAlDLcgAuA/wqQObjrhoHyNWwSyfw4Ipeselvg3zgRohgu+AprfpWABwID9VAiAlwlwp9PhHyVAJWYaEA8RVbT5sPoACZzPv1ku4E3KVCXdTeFKyHLDxAahLZFIAv+lcAHAh3+RJ0fzvcLVIGgFDApTk+PaBiu+znpasACoBtQPHgBe+s2nbsCkMMksD4qN0AhNUgCqAWRMBtQXhncyNPV0ErDKoAsjWcvtTiV7/sBCJgX3cCLgpCB34oTDEwgGEH/o3N/UD4cTIIS8BVKnRn0xYAAm+N8m0AdA4k+eiE1SWDJf2VRFcL/DKw4X/J4EY8NSTYLjVLgUKgkQxiAohqX+8F72zSq9OwA3jMog0wXIP2JDigB9SSQbUcIGNy13jB7lWZxo/QLItGYHLU/q1YvhhcAUgg1AloXhB+7srL9kE7xGImKJ1wfDQzQBXk6Iqo10NNveCDkw3b8kScAo78egeofTbA5gGKAUOg2RW5vjfevSnYv9iEhDcsRoJs380gdwHlzY8h4CedQV4j4LjRoNDErijY4SOhj4ED5J7N2M+fL6+GYQDEBg7V9RNQVrobWP+VY4EqQoAF/tizOftaa5wDh2IAqg0gvStUlwl0r0uO3ak4AXzJAv/DPvuUZ5A+WH0yeKhmw3VNkYndomw/ftg2+LED2M+EJR8O9Z6AQr+Ymei62pDzjm3qCLDAz93tc+x1xw7gQ2j4M/vH2h8uU2/m6+Gro8Zszj/1xjHYiPGH5QDM7jhpDOa3J2j4zoFaBFx9dC58BRhxTjgL4TkAVb4cam9L5B/ftK3JV5JctzwbQqXl99ZuKAFwnr+wuv0xTPyZT8fa9KwMf3z49m37cEPG2l+/Qz6RjLEg4N7MTePPvF/n+XxeEDY2pB8/JFmW6x7UkDmIETYT4Q+dCUApdPyZ97giFCSpXJY2Ngj6OuXHSejcAJtHMQ/ngdP/f7kfMv6PD75j8GX14wn1K+O16Pc2zkT9Y3fnbfBBSdr8sBMy/v1v30+ksvH5jHr0GP7sAKOXwemXdeb/NVTwOx8/fdk92SwKzo+H0J9UUiYZPQrEARABew84TPMnj8q2N1dXRUHiG7+r095hj7I6fhwAlZtyf+Tktzc3V4tSqdTwHZGh/VBidvwkANI/TakcCv6d+x+/YvAnBDw+eb4F/PlBjhn+Z3O24y9vBnP/GPn+1w/qua9KAi/UvS2ue10LhMQtZtpPKkCb+RdP/Ll/gnv/6ycdebEoChi6rvdNnpNq8JUKU/ixuB3/6u4nj6AxbBX3CRYMnWh8WX08yfMGyma6jxBSastPWMKPpd/Y8Isn792r+c9v34mcbGI5LpIcp1zWkBvbNZo+JNZUH1VWpuMcS/gx7q0NP3/y7b4rNT9RUa9ulA3UJV4T6OJrxmRgDie9ijJ5Kx3j2BIwYP+BD7//c7+xnhtqTuwb1zJEv/E/gqD7ON79x5xV8Fj3E9NJtti1Csj+02123/lnhzpsw7iJX8PIxbxIvgJmnbd25Q/dYtdiHiYAzb9IpmJtIM8dP+Lx9wfd/7z/RGDvqrjJgYsbtHnzEELXkBuEPKDUHi20B3qsADOOnzJ/fPL9RNdz2robLcPwjB0rgFKpYM1vE/RYXtRBwnkQQa3pt/qPnqgDHgYCjyCQyjOTC22EHoeAN/U/sG7bQT9bbwoiArHjQInpqTgXaytJzzWrzIID15Gr305UVh5h8KlY28ndWRCCUOtyKPwYOLb42kpiaOlWPM3F2lJSfYGA1x061C4/SZBXFDSbGBpOqtC5WJsSUBcFvSm5dfBUXSdha6+MLr/TsbctdN0G+jzgboKfKDu2c4AUXNi8erSMjz3+O2DXWyFzHo6a3o1FQAuattewoY8sDdwaHBxMplPc7wHcaoa8cavuqmETqVRqFSJKZXRyaGlgMK6i1gMr91uhVx3hvbdzqEGbFpmADdTqOQ/cuzf45EkyTkQDznG/IWpHOvDs3tLI/KwWuA0ClNoKOd9bugwahq0pOKdL7P+JEMNNpe/ahFLszhDOxX8TSSSRRBJJJJFEEkkkkUQSSSSRRBJJJJFEEkk7yf8BiS+/uf8NvT8AAAAASUVORK5CYII=',
    //   minX: 0,
    //   minY: 0,
    //   maxX: 0,
    //   maxY: 0,
    //   width: 1200,
    //   height: 200,
    // })
    const drawings = yield db.drawings.orderBy('updateTime').desc().toArray()
    yield put(receiveLocalDrawingsAction(drawings))
  } catch (err) {
    // TODO: show error message
    console.log('db error: REQUEST_LOCAL_DRAWINGS: ', err)
  }
}

export function* deleteSelectedDrawingsSaga({ drawings }) {
  try {
    drawings.forEach(drawing => db.drawings.delete(drawing.id))
  } catch (err) {
    // TODO: show error message
    console.log('db error: DELETE_SELETED_DRAWINGS: ', err)
  }
}

export function* downloadSelectedDrawingsSaga({ drawings }) {
  try {
    drawings.forEach(drawing => downloadImage(drawing.imagePath, drawing.title))
  } catch (err) {
    // TODO: show error message
    console.log('db error: DOWNLOAD_SELETED_DRAWINGS: ', err)
  }
}

export default function* FolderPageListeners() {
  yield takeEvery(REQUEST_LOCAL_DRAWINGS, requestLocalDrawingsSaga)
  yield takeEvery(DELETE_SELETED_DRAWINGS, deleteSelectedDrawingsSaga)
  yield takeEvery(DOWNLOAD_SELETED_DRAWINGS, downloadSelectedDrawingsSaga)
}
